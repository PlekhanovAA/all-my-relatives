<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <meta charset="UTF-8">
    <title th:text="#{nav.gallery}">–§–æ—Ç–æ–∞–ª—å–±–æ–º</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <link th:href="@{/css/style.css}" rel="stylesheet"/>
    <link th:href="@{/css/gallery.css}" rel="stylesheet"/>

    <meta name="_csrf" th:content="${_csrf.token}">
    <meta name="_csrf_header" th:content="${_csrf.headerName}">
</head>

<body th:data-username="${#authentication.name}"
      th:data-is-admin="${#authorization.expression('hasRole(''ADMIN'')')}">

<!-- header –≤–∫–ª—é—á–∞–µ–º –≤–Ω—É—Ç—Ä–∏ body -->
<div th:replace="~{fragments/header :: header}"></div>

<!-- –í–µ—Ä—Ö–Ω–µ–µ –º–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π -->
<div id="galleryActions" class="d-flex justify-content-center gap-2 mb-3 align-items-center">

    <!-- –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å —Ç–µ–≥–∏ -->
    <button id="toggleTagsBtn"
            class="btn btn-sm btn-outline-secondary"
            data-bs-toggle="tooltip"
            data-bs-title="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å —Ç–µ–≥–∏">
        üëÅ
    </button>

    <!-- –†–µ–∂–∏–º –æ—Ç–º–µ—Ç–∫–∏ -->
    <button id="editTagsBtn"
            class="btn btn-sm btn-outline-warning"
            data-bs-toggle="tooltip"
            data-bs-title="–û—Ç–º–µ—Ç–∏—Ç—å —á–µ–ª–æ–≤–µ–∫–∞">
        üè∑
    </button>

    <!-- –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ -->
    <button id="uploadPhotoBtn"
            class="btn btn-sm btn-outline-success"
            data-bs-title="–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ"
            data-bs-target="#uploadModal"
            data-bs-toggle="modal">
        ‚¨ÜÔ∏è
    </button>

    <!-- –í—Å–µ —Ñ–æ—Ç–æ (—Ç–∞–±–ª–∏—Ü–∞/–≥–∞–ª–µ—Ä–µ—è) -->
    <a href="/gallery/grid"
       class="btn btn-sm btn-outline-primary"
       data-bs-toggle="tooltip"
       data-bs-title="–í—Å–µ —Ñ–æ—Ç–æ / —Ç–∞–±–ª–∏—Ü–∞">
        üñº
    </a>

</div>

<main class="gallery-fullscreen">

    <button class="nav-btn left" onclick="showPrevious()" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è"><i class="bi bi-chevron-left"></i></button>

    <!-- –û–±—ë—Ä—Ç–∫–∞, –∫–æ—Ç–æ—Ä–æ–π JS –±—É–¥–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ –≤—ã—Å–æ—Ç–µ -->
    <div id="photoWrapper">
        <div id="photoCanvas" class="photo-canvas">
            <img id="mainPhoto" class="main-photo" src="" alt="–§–æ—Ç–æ"/>
        </div>
    </div>

    <button class="nav-btn right" onclick="showNext()" aria-label="–°–ª–µ–¥—É—é—â–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è"><i class="bi bi-chevron-right"></i></button>

</main>

<div th:if="${#authorization.expression('hasRole(''ADMIN'')')}"
     th:replace="~{fragments/relative_tag_modal :: tagModal}">
</div>

<script th:inline="javascript">
    window.galleryData = {
      galleryOwner: [[${galleryOwner}]],
      photos: [[${photos}]],
      noPhotosMsg: [[#{gallery.noPhotos}]],
      isAdmin: [[${#authorization.expression('hasRole(''ADMIN'')')}]]
    };
</script>

<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –ø–µ—Ä–≤—ã–º -->
<script th:src="@{/js/gallery.js}"></script>
<!-- –∑–∞—Ç–µ–º —Å–∫—Ä–∏–ø—Ç –ø–æ —Ç–µ–≥–∞–º -->
<script th:src="@{/js/gallery_tags.js}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
