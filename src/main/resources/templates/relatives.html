<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>all my Relatives</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link th:href="@{/css/style.css}" rel="stylesheet" />
</head>

<body>

<!-- –ù–∞–≤–±–∞—Ä -->
<div sec:authorize="isAuthenticated()"
     th:replace="~{fragments/navbar :: navbar}">
</div>

<div class="container mt-4">
    <h1 th:text="#{relatives.title}">–†–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏</h1>

    <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
    <a href="/relative/add"
       class="btn btn-success mb-3"
       style="background-color: #7C8B60;"
       sec:authorize="hasRole('ADMIN')">
        <span th:text="#{button.add}">–î–æ–±–∞–≤–∏—Ç—å</span>
    </a>

    <!-- –¢–∞–±–ª–∏—Ü–∞ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤ -->
    <div class="table-responsive">
        <table class="table table-bordered align-middle">
            <thead class="table-light text-center">
            <tr>
                <th th:text="#{relatives.id}">ID</th>

                <!-- üë™ –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <th th:text="#{relatives.firstname}">–ò–º—è</th>
                <th th:text="#{relatives.lastname}">–§–∞–º–∏–ª–∏—è</th>

                <!-- üìÖ –î–∞—Ç—ã -->
                <th style="width: 120px;" th:text="#{relatives.birthdate}">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</th>
                <th style="width: 120px;" th:text="#{relatives.deathdate}">–î–∞—Ç–∞ —Å–º–µ—Ä—Ç–∏</th>

                <!-- üìç –õ–æ–∫–∞—Ü–∏–∏ -->
                <th th:text="#{relatives.birthplace}">–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è</th>
                <th th:text="#{relatives.deathplace}">–ú–µ—Å—Ç–æ —Å–º–µ—Ä—Ç–∏</th>
                <th th:text="#{relatives.currentlocation}">–¢–µ–∫—É—â–µ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</th>

                <!-- ‚öôÔ∏è –î–µ–π—Å—Ç–≤–∏—è -->
                <th th:text="#{relatives.actions}" sec:authorize="hasRole('ADMIN')">–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="r : ${relatives}">
                <td th:text="${r.id}"></td>

                <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <td th:text="${r.firstName}"></td>
                <td th:text="${r.lastName}"></td>

                <!-- –î–∞—Ç—ã -->
                <td th:text="${r.birthDate}"></td>
                <td th:text="${r.deathDate != null ? r.deathDate : '‚Äî'}"></td>

                <!-- –õ–æ–∫–∞—Ü–∏–∏ -->
                <td th:text="${r.birthPlace != null ? r.birthPlace.name : '‚Äî'}"></td>
                <td th:text="${r.deathPlace != null ? r.deathPlace.name : '‚Äî'}"></td>
                <td th:text="${r.currentLocation != null ? r.currentLocation.name : '‚Äî'}"></td>

                <!-- –î–µ–π—Å—Ç–≤–∏—è -->
                <td sec:authorize="hasRole('ADMIN')" class="text-center">
                    <a class="btn btn-sm btn-outline-secondary"
                       th:href="@{'/relative/edit/' + ${r.id}}"
                       th:text="#{relatives.edit}">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
